<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="things-card-image.html">

<dom-module id="things-card-image-list">
	<template>
		<template id="card-list" is="dom-repeat" items="[[items]]">
			<things-card-image
				heading="[[item.name]]"
				description="[[item.description]]"
				field-array="[[fieldArray]]"
				detail-obj="[[item]]"
				attachment-id="[[item.attachment_id]]"
				image-field="[[imageField]]">
			</things-card-image>
		</template>
	</template>

	<script>
		Polymer({
			is: 'things-card-image-list',

			properties: {
				
				/**
				 * ajax 호출을 통해 받는 items object
				 */
				items: {
					type: Object
				},

				/**
				 * detail view에 출력하고자 하는 field을 string 으로 받는다.
				 */
				detailFields: {
					type: String,
					observer: 'detailFieldChanged'
				},

				/**
				 * detailFieldChanged를 통해 array로 변환한 detailFields
				 */
				fieldArray: {
					type: Array
				},

				/**
				 * items object에서 실제 image의 url 정보가 들어 있는 키 값을 설정 한다.
				 */
				imageField: {
					type: String
				}
			},

			/**
			 * attribute로 전달받은 string 형태의 detailFileds를 array형태로 변환하고
			 * fieldArray에 초기화
			 */
			detailFieldChanged: function(fields) {
				this.fieldArray = fields.split(",");
			}
		});
	</script>
</dom-module>